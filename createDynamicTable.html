//Create table dynamically
function createDynamicTable(response) {
    // console.log("in createDynamicTable" + response.dataseries[0]);
    var table = document.createElement("table");
    var tr = document.createElement("tr");
  
    var array = [
      "timepoint",
      "cloudcover",
      "lifted_index",
      "prec_type",
      "prec_amount",
      "temp2m",
      "rh2m",
      "weather",
    ];
  
    for (var j = 0; j < array.length; j++) {
      var th = document.createElement("th"); //column
      var text = document.createTextNode(array[j]); //cell
      th.appendChild(text);
      tr.appendChild(th);
    }
    table.appendChild(tr);
  
    for (let key = 0; key <= response.dataseries.length; key++) {
      if (response.dataseries[key] != undefined) {
        var tr = document.createElement("tr");
        var tr = document.createElement("tr");
        var td1 = document.createElement("td");
        var td2 = document.createElement("td");
        var td3 = document.createElement("td");
        var td4 = document.createElement("td");
        var td5 = document.createElement("td");
        var td6 = document.createElement("td");
        var td7 = document.createElement("td");
        var td8 = document.createElement("td");
  
        var text1 = document.createTextNode(
          response.dataseries[key]["timepoint"]
        );
        var text2 = document.createTextNode(
          response.dataseries[key]["cloudcover"]
        );
        var text3 = document.createTextNode(
          response.dataseries[key]["lifted_index"]
        );
        if (response.dataseries[key]["prec_type"] != undefined) {
          var text4 = document.createTextNode(
            response.dataseries[key]["prec_type"]
          );
        } else {
          var text4 = document.createTextNode("none");
        }
        if (response.dataseries[key]["prec_amount"] != undefined) {
          var text5 = document.createTextNode(
            response.dataseries[key]["prec_amount"]
          );
        } else {
          var text5 = document.createTextNode(0);
        }
        let temp2m = response.dataseries[key]["temp2m"];
        if (isObject(temp2m)) {
          console.log(temp2m);
          var text6 = document.createTextNode(temp2m.min + " - " + temp2m.max);
        } else {
          var text6 = document.createTextNode(response.dataseries[key]["temp2m"]);
        }
        var text7 = document.createTextNode(response.dataseries[key]["rh2m"]);
        var img = document.createElement("img");
        var imagesDisplay = "./images/cloudy.png";
        img.src = imagesDisplay;
  
        if (response.dataseries[key]["weather"] == "pcloudyday") {
          var text8 = document.createTextNode(
            response.dataseries[key]["weather"]
          );
        } else {
          var text8 = document.createTextNode(
            response.dataseries[key]["weather"]
          );
        }
  
        td1.appendChild(text1);
        td2.appendChild(text2);
        td3.appendChild(text3);
        td4.appendChild(text4);
        td5.appendChild(text5);
        td6.appendChild(text6);
        td7.appendChild(text7);
        td8.appendChild(text8);
  
        tr.appendChild(td1);
        tr.appendChild(td2);
        tr.appendChild(td3);
        tr.appendChild(td4);
        tr.appendChild(td5);
        tr.appendChild(td6);
        tr.appendChild(td7);
        tr.appendChild(td8);
  
        table.appendChild(tr);
        table.setAttribute("border", "solid");
        table.setAttribute("color", "white");
  
        document.getElementById("results").appendChild(table);
      }
    }
    alert("table load end");
  }
  